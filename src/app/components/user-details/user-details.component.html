<div
  *ngIf="user() as user"
  class="max-w-3xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden md:flex relative"
>
  <ng-container *ngIf="editMode(); else viewMode">
    <button
      (click)="onClose()"
      class="absolute top-2 right-2 p-2 flex cursor-pointer text-gray-600 hover:text-gray-800 transition border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      aria-label="Close edit"
    >
      <span class="material-symbols-outlined">close</span>
    </button>
    <div class="md:w-1/3">
      <img
        class="w-full h-56 md:h-full object-cover"
        [src]="user.picture.large"
      />
    </div>
    <div class="md:w-2/3 p-6 space-y-4 mt-4">
      <form class="space-y-4">
        <div>
          <label for="firstName" class="block text-m font-bold text-gray-700"
            >First Name</label
          >
          <input
            id="firstName"
            type="text"
            [(ngModel)]="firstName"
            name="firstName"
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>
        <div>
          <label for="lastName" class="block text-m font-bold text-gray-700"
            >Last Name</label
          >
          <input
            id="lastName"
            type="text"
            [(ngModel)]="lastName"
            name="lastName"
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>
        <div>
          <label for="email" class="block text-m font-bold text-gray-700"
            >Email</label
          >
          <input
            id="email"
            type="email"
            [(ngModel)]="email"
            name="email"
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>
        <div>
          <label for="phone" class="block text-m font-bold text-gray-700"
            >Phone</label
          >
          <input
            id="phone"
            type="tel"
            [(ngModel)]="phone"
            name="phone"
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>
        <div>
          <label for="cell" class="block text-m font-bold text-gray-700"
            >Cell</label
          >
          <input
            id="cell"
            type="tel"
            [(ngModel)]="cell"
            name="cell"
            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>
      </form>
      <button
        (click)="onSave()"
        class="mt-4 p-2 text-gray-600 cursor-pointer hover:text-gray-800 transition border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
        Save
      </button>
    </div>
  </ng-container>
  <ng-template #viewMode>
    <button
      (click)="onEdit()"
      class="absolute top-2 right-2 p-2 flex cursor-pointer text-gray-600 hover:text-gray-800 transition border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      aria-label="Edit user"
    >
      <span class="material-symbols-outlined">edit</span>
    </button>
    <div class="md:w-1/3">
      <img
        class="w-full h-56 md:h-full object-cover"
        [src]="user.picture.large"
      />
    </div>
    <div class="md:w-2/3 p-6 space-y-2">
      <h2 class="text-2xl font-bold text-gray-800">
        {{ user.name.title }} {{ user.name.first }} {{ user.name.last }}
      </h2>
      <dl class="grid grid-cols-1 gap-y-4">
        <div>
          <dt class="font-semibold text-gray-600">Email</dt>
          <dd class="text-gray-800">{{ user.email }}</dd>
        </div>
        <div>
          <dt class="font-semibold text-gray-600">Phone</dt>
          <dd class="text-gray-800">{{ user.phone }}</dd>
        </div>
        <div>
          <dt class="font-semibold text-gray-600">Cell</dt>
          <dd class="text-gray-800">{{ user.cell }}</dd>
        </div>
        <div>
          <dt class="font-semibold text-gray-600">Address</dt>
          <dd class="text-gray-800">
            {{ user.location.street.name }}, {{ user.location.city }},
            {{ user.location.state }}, {{ user.location.country }}
            {{ user.location.postcode }}
          </dd>
        </div>
      </dl>
    </div>
  </ng-template>
  <ng-container *ngIf="editMode()">
  </ng-container>
</div>
